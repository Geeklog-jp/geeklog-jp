Geeklog1.4.1にインストールする場合は、readme_ja.htmlをお読みください。
Geeklog1.5.0にインストールする場合は、readme_ja_1.5.htmlをお読みください。


[URLの照合機能について]

バージョン0.3.0よりURLの照合機能を追加しました。
URLの照合機能とは、Geeklogサイトの表示中のページのURLをメニューアイテムごとに照合し、マッチしたメニューアイテムのスタイルを変化させるものです。
例えば、リンクのページを開いているときに、リンクのメニューアイテムを反転させて表示させることが可能となります。
ただし、カスタムメニューはURLの照合を担当するだけであり、別途、システムの一部（lib-common.php）とテーマの一部を変更する必要があります。

一例として、リンクのメニューアイテムを反転させる方法を示します。ここでは、professionalテーマを用います。
カスタムメニューの管理画面で「リンク」を編集します。
項目「URL照合文字列」へ"/links/"を入力し、更新ボタンをクリックします。カスタムメニューエディタでの作業はこれだけです。

これは、「表示ページのURLに"/links/"が含まれていたときに、メニューアイテム「リンク」のスタイルを変化させる。」という意味の設定です。
なお、「正規表現」を有効にすると、PHPがサポートしている正規表現で照合することができます。照合の条件が複雑な場合に使用することを想定した機能であり、使用する場面は少ないでしょう。照合にはpreg_match関数を使用しています。
正規表現の詳細については http://jp.php.net/manual/ja/regexp.reference.php を参照してください。

lib-common.phpの変更は1行追加するだけの簡単なものであり、副作用もありません。同梱の/bonus/lib-common.phpの666行目を参考にしてください。Geeklog1.5.1用ですので該当バージョンをお使いの方はそのまま使用されてもよいでしょう。

テーマの変更は、menuitem.thtml、menuitem_last.thtml、style.css の3つのファイルを対象とします。
/bonus/layout/professonal/内のファイルを参照してください。
<li>タグに class="{menuitem_selected}" が追加されていることに注目してください。
style.csssは1026行目から1029行目の4行を加えただけです。(サンプルなので単純に背景色を変えただけ)

これで完了です。メニューアイテム「リンク」をクリックして効果を確認してみてください。
テーマをさらに変更してハイセンスなメインメニューを構築してください。


[多言語切り替え機能について]

バージョン0.2.3より多言語切り替え機能への対応を強化しました。
バージョン0.2.2以前のバージョンでは、多言語切り替えのために「可変モード」を用意していましたが、メニューアイテムの表示を切り替えることはできるものの、リンク先まで切り替えることはできませんでした。（そこまでやるにはPHPモードを活用する必要がありました。）
バージョン0.2.3からはGeeklog1.5.1から追加された「ブロックの多言語切り替え機能」と同様の機能をサポートします。

「ブロックの多言語切り替え機能」の詳細については以下のWikiを参照してください。
http://wiki.geeklog.jp/index.php/Multi-Language_Support#.E3.83.96.E3.83.AD.E3.83.83.E3.82.AF
http://wiki.geeklog.net/wiki/index.php/Multi-Language_Support#Blocks

一例として、英語と日本語を切り替える場合の使用方法を示します。
カスタムメニュー管理画面で言語数＋１つ（つまり合計３つ）で１セットのメニューアイテムを作成します。
そして「メニューアイテムID」を、例えば次のように設定します。
about
about_en
about_ja

ここで添字"_en"を付加したものは英語モードで、添字"_ja"を付加したものは日本語モードで用いるアイテムにします。
そして、それぞれの「有効」オプションを次のように設定します。
about        有効
about_en     無効
about_ja     無効

「タイトル（固定）」や「URL」はそれぞれの言語に応じて、表示させたいリンク先のURLを指定します。（「モード」が「固定」の場合）
これで完了です。言語モードを切り替えてみてください。

メニューアイテム"about"の情報が、システムの言語モードに応じて、メニューアイテム"about_en"やメニューアイテム"about_ja"の情報でオーバーライドされる仕組みです。システムの多言語モードがオフの時には、メニューアイテム"about"の情報がそのまま使われます。



以上。
