<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<title>the Geeklog Theme Editor plugin</title>
	<style type="text/css">
	<!-->
		body {
			color: black;
			background-color: white;
			line-height: 1.5em;
		}
		.geeklog {
			background-color: yellow;
		}
		.public {
			background-color: #99ff00;
		}
		.admin {
			background-color: aqua;
		}
		li {
			padding: 5px 5px 10px 5px;
		}
		h2, h3 {
			padding: 0.3em;
			background-color: #99ff99;
		}
		p {
			text-indent: 1em;
		}
		table {
			border-collapse: collapse;
			border: solid 2px black;
			padding: 0.3em;
		}
		th, td {
			border: solid 1px black;
			padding: 0.3em;
		}
		#copyright {
			padding: 0.5em 1em;
			border: solid 1px aqua;
			background-color: #ccffff;
			font-style: italic;
		}
		.fix {
			color: red;
			font-weight: bold;
		}
		.new {
			color: green;
			font-weight: bold;
		}
	<! -->
	</style>
</head>

<body>
<h1>Geeklog Theme Editor Plugin [v1.0.3]</h1>
by mystral-kk [<a href="mailto:geeklog@mystral-kk.net">geeklog@mystral-kk.net</a>]<br>
Nov 7, 2006

<h2>Table of Contents</h2>

<ul>
	<li><a href="#description">Description</a></li>
	<li><a href="#version">Version History</a></li>
	<li><a href="#thanks">Thanks!</a></li>
	<li><a href="#install">Installing The Plugin</a></li>
	<li><a href="#uninstall">Uninstalling The Plugin</a></li>
	<li><a href="#config">Configuring The Plugin</a></li>
	<li><a href="#upgrade">Upgrading The Plugin</a></li>
	<li><a href="#usage">Usage</a></li>
	<li><a href="#license">License</a></li>
</ul>

<a name="description"></a><h3>Description</h3>
<p>The Theme Editor is an online theme editor which allows you to edit template files (*.thtml) and cascading style sheet file (*.css).  With this plugin, you can edit Geeklog themes on the Web, without uploading theme files.</p>

<a name="version"></a><h3>Version History</h3>
<table border="1">
	<tr>
		<th>Date</th><th>Version</th><th>Description</th>
	</tr>
	<tr>
		<td>Nov 7, 2006</td><td>1.0.3</td><td><span class="fix">[Fix]</span> Dealed with the case where default language is not Japanese (Thanks, Kemal and Tsuchi).<br><span class="new">[New]</span> Added many more template file names(Thanks, Ivy).</td>
	</tr>
	<tr>
		<td>Nov 2, 2006</td><td>1.0.2</td><td><span class="fix">[Fix]</span> Dealed with the case where magic_quotes_gpc is on (Thanks, samstone).</td>
	</tr>
	<tr>
		<td>Oct 1, 2006</td><td>1.0.0</td><td>Initial version</td>
	</tr>
</table>

<a name="version"></a><h3>Thanks!</h3>
<ul>
	<li>Geeklog.jp members for useful suggestions</li>
	<li>Geeklog Core Team for developing and maintaining Geeklog, the Ultimate CMS</li>
</ul>

<a name="#install"></a><h3>Install instruction for the Geeklog Theme Editor plugin</h3>

<p>In the following descriptions</p>
<ul>
	<li><span class="geeklog">&lt;geeklog_dir&gt;</span> is the directory where the system config.php file resides</li>
	<li><span class="admin">&lt;admin&gt;</span> is the directory where the administration files reside (usually, under <span class="public">&lt;public_html&gt;</span>)</li>
</ul>

<ol>
	<li>Back up your Geeklog Database.  The themedit plugin adds tables to your Geeklog database.  You can do this with the built in admin backup facility.</li>
	<li>Uncompress the themedit plugin archive while in the <span class="geeklog">&lt;geeklog_dir&gt;</span>/plugins directory.  The archive will create a directory called themedit in the plugins directory.</li>
	<li>Create the admin directory.  Under your <span class="admin">&lt;admin&gt;</span>/plugins/ directory create a directory called themedit.</li>
	<li>Change to your <span class="geeklog">&lt;geeklog_dir&gt;</span>/plugins/themedit/ directory.  Copy the files in the admin directory to the <span class="admin">&lt;admin&gt;</span>/plugins/themedit/ directory your created in step 3.</li>
	<li>Edit the config.php in the themedit directory and confirm the table prefix (the same as Geeklog table prefix by default) and modify the names of themes and files you would like to edit with the Theme Editor plugin.</li>
	<li>Log in to your Geeklog as a root user and run install.php in your <span class="admin">&lt;admin&gt;</span>/plugins/themedit/ directory.  The install page will tell you if the install was successful or not.  If not, examine Geeklog system errorlog for possible problems.  The themedit plugin should now be installed and functioning.  Clicking on the themedit Icon will take you to the admin page.</li>
	<li>Set up security.  On install only the root users have access to themedit administration.  You can delegate control for the functions through the user and group editors.</li>
	<li><strong>[***** EXTRA STEP 1 FOR THEME EDITOR PLUGIN *****]</strong>  Change the permissions of the directories where *.thtml files resides to <strong>757</strong>.  Change the permissions of the *.thtml files to <strong>646</strong>.</li>
	<li><strong>[***** EXTRA STEP 2 FOR THEME EDITOR PLUGIN *****]</strong>  Change the permissions of the files preview.html and preview.css, which reside in the <span class="admin">&lt;admin&gt;</span>/plugins/themedit/ directory, to <strong>646</strong>.</li>
</ol>
<p>NOTE: The Theme Editor plugin uses JavaScript a lot.  For better functionality, it is strongly recommended that you enable JavaScript.</p>

<a name="#uninstall"></a><h3>Uninstall instruction for the Geeklog Theme Editor plugin</h3>

<ol>
	<li>Run the install.php page in your <span class="admin">&lt;admin&gt;</span>/plugins/themedit directory.  This will remove all the data from your database.</li>
	<li>Delete the two plugin directories created in the install process:  <span class="geeklog">&lt;geeklog-dir&gt;</span>/plugins/themedit/ and <span class="admin">&lt;admin&gt;</span>/plugins/themedit/</li>
	<li><strong>[***** EXTRA STEP FOR THEME EDITOR PLUGIN *****]</strong>  Restore the permissions of the directories and files you changed during the installation.  For example, change the permissions of the directories to 755 and those of the files to 644.</li>
</ol>

<a name="config"></a><h3>Configuring The Plugin</h3>
<p>In the plugin's config.php, you can modify these values:</p>
<table border="1">
	<tr>
		<th width="250">Name</th><th>Type</th><th>Description</th>
	</tr>
	<tr>
		<td><code>$_THM_CONF['allowed_themes']</code></td>
		<td>Array of theme names</td>
		<td>The theme names (case-sensitive) you can edit with the plugin.  The default value is 'professional'.</td>
	</tr>
	<tr>
		<td><code>$_THM_CONF['allowed_files']</code></td>
		<td>Array of file names</td>
		<td>The file names (case-sensitive) you can edit with the plugin.  Template files (*.thtml) and cascading style sheet files (*.css) are supported.</td>
	</tr>
	<tr>
		<td><code>$_THM_CONF['resync_database']</code></td>
		<td>one of 'auto', 'manual', 'ignore'</td>
		<td>When you add/remove a theme to/from <code>$_THM_CONF['allowed_themes']</code>, or a template file to/from <code>$_THM_CONF['allowed_files']</code>, The Theme Editor plugin will detect it automatically.<br>
			<ul>
				<li>'auto' -- the plugin will update the data  stored in databse automatically.</li>
				<li>'manual' -- the plugin will display the information and 'UPDATE database' button.</li>
				<li>'igonore' -- the plugin will do nothing about the change.</li>
			</ul>
		</td>
	</tr>
</table>

<a name="upgrade"></a><h3>Upgrading The Plugin</h3>

<a name="usage"></a><h3>Usage</h3>
<p>The Theme Editor plugin is so simple that you can use it almost intuitively.</p>
<ol>
	<li>Choose a theme you want to edit at a dropdown menu.</li>
	<li>Choose a file you want to edit at a dropdown menu.</li>
	<li>A list of template vars available in the current file will be displayed.</li>
	<li>When you hit one of the buttons with a template var name on it, the corresponding tag will be inserted into the caret position.<br><strong>NOTE</strong>: you have to enable JavaScript to use these buttons.</li>
	<li>When you hit the "<strong>Preview</strong>" button, the current content will be previewed in another page.</li>
	<li>When you hit the "<strong>Save</strong>" button, the current content will be saved on the Web.</li>
	<li>When you hit the "<strong>Initialize</strong>" button, the content of the file will be reverted to what it used to be when you installed the Theme Editor plugin.</li>
</ol>

<a name="license"></a><h3>License</h3>
<p>The Theme Editor plugin is licensed under the GPL.</p>

<div id="copyright">Copyright &copy; 2006 mystral-kk</div>
</body>
</html>
