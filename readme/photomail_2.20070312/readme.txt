// +---------------------------------------------------------------------------+
// | メール記事投稿     custom_photomail.php   Ver2.20070130                   |
// +---------------------------------------------------------------------------+
// | ファイル構成：                                                            |
// |   public_html/photomail/photomail.php      (呼び出し用プログラムサンプル）|
// |   public_html/photomail/photomailimg.php   (自動実行用プログラムサンプル）|
// |   public_html/photomail/photomailcheck.php (チェック用プログラム）        |
// |   public_html/photomail/templates/photo_thumb_no.thtml                    |
// |        (サムネイルを使用しない場合のテンプレート)                         |
// |   public_html/photomail/templates/photomail/photo_thumb_yes.thtml         |
// |        (サムネイルを使用する場合のテンプレート)                           |
// |   private/system/custom/custom_photomail.php                              |
// |   private/system/custom/custom_photomail_ini.php                          |
// |   private/logs/photomail.log                                              |
// |        ログファイル出力する時は書込可能にしてください                     |
// |        ログファイルの内容は自動的に削除されません                         |
// |                                                                           |
// +---------------------------------------------------------------------------+
// | 設置：(1)設定ファイル(custom_photomail_ini.php)を編集する。               |
// |       (2)ファイルをアップロードする。                                     |
// |  ○呼び出し用プログラム(photomail.php)を使わずにindex.phpで実行する時は   |
// |    index.php の                                                           |
// |    require_once ($_CONF['path_system'] . 'lib-story.php');の後に          |
// |   下記のコーディングを追加します                                          |
// |    require ($_CONF['path'].'system/custom/custom_photomail.php');         |
// |  ○ブロックに登録して誰かがサイトにアクセスした時に実行する方法           |
// |    ノーマルブロックのコンテンツに下記を記述する                           |
// |    <img src="photomail/photomailimg.php" width="1" height="1" alt="" />   |
// |    静的ページ、テンプレートで実行する場合も同様                           |
// |                                                                           |
// | 使い方：(1) メールホスト宛に設定登録したメールアドレスでメールを送る。    |
// | 注:メーラーに依存しますが、ほとんどの場合タイトルは全角１６文字までです。 |
// | 注:設定ファイルでユーザー名に日本語を使用する場合は、                     |
// |    設定ファイルは、使用する文字コード(UTFまたはEUC)で書き込みしてください |
// | 注:記事を削除しても画像は削除されませんので、別途削除してください。       |
// | 注:画像ファイルのエンコードはBASE64のみ処理をします。                     |
// +---------------------------------------------------------------------------+
// | チェック用プログラムの使用方法                                            |
// |    URL  public_html/photomail/photomailcheck.php を起動します。           |
// |    デフォルトはログファイル出力画面表示になっています。                   |
// |    受信確認したメールは削除していません。                                 |
// |    確認後、呼び出し用プログラムを実行することで記事投稿が実行されます。   |
// +---------------------------------------------------------------------------+
// | 2006年9月22日版以前のプログラムを設定している場合の注意事項               |
// |   1.テンプレートファイルの位置が変わりました                              |
// |     system/custom/layout/ → public_html/photomail/templates/             |
// |     system/custom/layout/ 以下は削除してください。                        |
// |     テンプレートファイルの内容に変更はありません。                        |
// |   2.呼び出し用自動実行用プログラムの位置および名前が変わりました。        |
// |     public_html/toukou.php → public_html/photomail/photomail.php         |
// |     public_html/toukouimg.php → public_html/photomail/photomailimg.php   |
// |     ブロック等に設定している場合は変更が必要です。                        |
// |   3.ログ出力機能が追加されました。                                        |
// |     デフォルトはログ出力しないになっています。                            |
// +---------------------------------------------------------------------------+
// | 2006年9月22日版以前のプログラムを設定している場合の注意事項               |
// |   1.テンプレートファイルの位置が変わりました                              |
// |     system/custom/layout/ → public_html/photomail/templates/             |
// |     system/custom/layout/ 以下は削除してください。                        |
// |     テンプレートファイルの内容に変更はありません。                        |
// |     テンプレートファイルは、2005年7月15日版も使用できます。               |
// |     ただしファイル名は表示されません。                                    |
// +---------------------------------------------------------------------------+
// | 2006年9月22日版以前の設定ファイルを使用する場合の注意事項                 |
// |   1.short_open_tag OFF環境対応のため <? を <?php に変更しています。       |
// |   2.許可するグループを設定を使用しない場合は、                            |
// |     過去の設定ファイルも使用できます。                                    |
// |     Ver1.20060315 用設定ファイルも使用できます。                          |
// |     Ver1.20050420 用設定ファイルも使用できます。                          |
// |     Ver1.20051017 用設定ファイルも使用できます。                          |
// |     ただし                                                                |
// |     リンク先の指定サイズを６４０以外に設定したい場合は、                  |
// |     Ver1.20060921 用設定ファイルを参照のうえ、変数を追加してください。    |
// |     ゲストユーザーの投稿を認める時は                                      |
// |     Ver2.20070130 用設定ファイルを参照のうえ、変数を追加してください。    |
// |     当ファイルに記述しているアドレス以外は認めない時は                    |
// |     Ver2.20070130 用設定ファイルを参照のうえ、変数を追加してください。    |
// +---------------------------------------------------------------------------+

